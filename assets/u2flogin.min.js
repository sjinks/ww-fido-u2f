function magic(){var d=document.getElementById.bind(document),e=d("u2f-form"),s=e.querySelector("p.submit"),u=d("progressbar"),t=d("login_error");function a(e){for(;t.firstChild;)t.removeChild(t.firstChild);t.insertAdjacentHTML("afterbegin",e),t.removeAttribute("hidden")}function c(){if(null===this.response||200!==this.status)return a(wwU2F.serverError),s.removeAttribute("hidden"),void u.setAttribute("hidden","");this.response.ok?this.response.redirect?window.location.href=this.response.redirect:this.response.message&&(document.querySelector(".progressbar-container").style.display="none",d("interact").innerHTML=this.response.message):(a(this.response.message),s.removeAttribute("hidden"),u.setAttribute("hidden",""))}function n(){e.removeAttribute("hidden"),t.setAttribute("hidden",""),u2f.sign(wwU2F.request[0].appId,wwU2F.request[0].challenge,wwU2F.request,function(e){if(e.errorCode){a(wwU2F.errors[e.errorCode]||wwU2F.errors[1]),s.removeAttribute("hidden"),u.setAttribute("hidden","")}else{var t=encodeURIComponent(d("rememberme").value),n=encodeURIComponent(d("redirect_to").value),r=encodeURIComponent(d("user_id").value),i=encodeURIComponent(d("interim_login").value),o=new XMLHttpRequest;o.addEventListener("load",c),o.open("POST",wwU2F.ajax_url),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.responseType="json",o.send("action=wwu2f_sign&data="+encodeURIComponent(JSON.stringify(e))+"&rememberme="+t+"&redirect_to="+n+"&user_id="+r+"&interim_login="+i)}})}e.addEventListener("submit",function(e){e.preventDefault()}),"undefined"!=typeof u2f&&u2f.sign?(s.querySelector(".button").addEventListener("click",function(){u.removeAttribute("hidden"),s.setAttribute("hidden",""),n()}),d("interact").removeAttribute("hidden"),n()):a(wwU2F.noSupport)}document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof u2f&&u2f.sign)magic();else{var e=document.createElement("script");e.setAttribute("src",wwU2F.u2f_api),e.setAttribute("async",""),e.addEventListener("load",magic),e.addEventListener("error",magic),document.head.appendChild(e)}});
//# sourceMappingURL=u2flogin.min.js.map
