function magic(){var e=document.getElementById("u2f-form"),d=e.querySelector("p.submit"),s=document.getElementById("progressbar"),t=document.getElementById("login_error");function u(e){for(;t.firstChild;)t.removeChild(container.firstChild);t.insertAdjacentHTML("afterbegin",e),t.removeAttribute("hidden")}function m(){if(null===this.response||200!==this.status)return u(wwU2F.serverError),d.removeAttribute("hidden"),void s.setAttribute("hidden","");this.response.ok?this.response.redirect?window.location.href=this.response.redirect:this.response.message&&(document.getElementById("progressbar-container").style.display="none",document.getElementById("interact").innerHTML=this.response.message):(u(this.response.message),d.removeAttribute("hidden"),s.setAttribute("hidden",""))}function n(){e.removeAttribute("hidden"),t.setAttribute("hidden",""),u2f.sign(wwU2F.request[0].appId,wwU2F.request[0].challenge,wwU2F.request,function(e){if(e.errorCode){wwU2F.errors[e.errorCode];u(wwU2F.errors[e.errorCode]),d.removeAttribute("hidden"),s.setAttribute("hidden","")}else{var t=encodeURIComponent(document.getElementById("rememberme").value),n=encodeURIComponent(document.getElementById("redirect_to").value),r=encodeURIComponent(document.getElementById("user_id").value),i=encodeURIComponent(document.getElementById("interim_login").value),o=new XMLHttpRequest;o.addEventListener("load",m),o.open("POST",wwU2F.ajax_url),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.responseType="json",o.send("action=wwu2f_sign&data="+encodeURIComponent(JSON.stringify(e))+"&rememberme="+t+"&redirect_to="+n+"&user_id="+r+"&interim_login="+i)}})}e.addEventListener("submit",function(e){e.preventDefault()}),"undefined"!=typeof u2f&&u2f.sign?(d.querySelector(".button").addEventListener("click",function(){s.removeAttribute("hidden"),d.setAttribute("hidden",""),n()}),document.getElementById("interact").removeAttribute("hidden"),n()):u(wwU2F.noSupport)}document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof u2f&&u2f.sign)magic();else{var e=document.createElement("script");e.setAttribute("src",wwU2F.u2f_api),e.setAttribute("async",""),e.addEventListener("load",magic),e.addEventListener("error",magic),document.head.appendChild(e)}});
//# sourceMappingURL=u2flogin.min.js.map
