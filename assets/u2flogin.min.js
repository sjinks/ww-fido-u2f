function magic(){var e=document.getElementById("u2f-form"),s=e.querySelector("p.submit"),u=document.getElementById("progressbar"),t=document.getElementById("login_error");function m(e){for(;t.firstChild;)t.removeChild(t.firstChild);t.insertAdjacentHTML("afterbegin",e),t.removeAttribute("hidden")}function c(){if(null===this.response||200!==this.status)return m(wwU2F.serverError),s.removeAttribute("hidden"),void u.setAttribute("hidden","");this.response.ok?this.response.redirect?window.location.href=this.response.redirect:this.response.message&&(document.getElementById("progressbar-container").style.display="none",document.getElementById("interact").innerHTML=this.response.message):(m(this.response.message),s.removeAttribute("hidden"),u.setAttribute("hidden",""))}function n(){e.removeAttribute("hidden"),t.setAttribute("hidden",""),u2f.sign(wwU2F.request[0].appId,wwU2F.request[0].challenge,wwU2F.request,function(e){if(e.errorCode){var t=wwU2F.errors[e.errorCode]||1;m(wwU2F.errors[t]),s.removeAttribute("hidden"),u.setAttribute("hidden","")}else{var n=encodeURIComponent(document.getElementById("rememberme").value),r=encodeURIComponent(document.getElementById("redirect_to").value),i=encodeURIComponent(document.getElementById("user_id").value),d=encodeURIComponent(document.getElementById("interim_login").value),o=new XMLHttpRequest;o.addEventListener("load",c),o.open("POST",wwU2F.ajax_url),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.responseType="json",o.send("action=wwu2f_sign&data="+encodeURIComponent(JSON.stringify(e))+"&rememberme="+n+"&redirect_to="+r+"&user_id="+i+"&interim_login="+d)}})}e.addEventListener("submit",function(e){e.preventDefault()}),"undefined"!=typeof u2f&&u2f.sign?(s.querySelector(".button").addEventListener("click",function(){u.removeAttribute("hidden"),s.setAttribute("hidden",""),n()}),document.getElementById("interact").removeAttribute("hidden"),n()):m(wwU2F.noSupport)}document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof u2f&&u2f.sign)magic();else{var e=document.createElement("script");e.setAttribute("src",wwU2F.u2f_api),e.setAttribute("async",""),e.addEventListener("load",magic),e.addEventListener("error",magic),document.head.appendChild(e)}});
//# sourceMappingURL=u2flogin.min.js.map
