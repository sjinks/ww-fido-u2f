function magic(){var s=document.getElementById.bind(document),e=s("u2f-form"),u=e.querySelector("p.submit"),a=s("progressbar"),t=s("login_error");function c(e){for(;t.firstChild;)t.removeChild(t.firstChild);t.insertAdjacentHTML("afterbegin",e),t.removeAttribute("hidden")}function m(){if(null===this.response||200!==this.status)return c(wwU2F.serverError),u.removeAttribute("hidden"),void a.setAttribute("hidden","");this.response.ok?this.response.redirect?window.location.href=this.response.redirect:this.response.message&&(s("progressbar-container").style.display="none",s("interact").innerHTML=this.response.message):(c(this.response.message),u.removeAttribute("hidden"),a.setAttribute("hidden",""))}function n(){e.removeAttribute("hidden"),t.setAttribute("hidden",""),u2f.sign(wwU2F.request[0].appId,wwU2F.request[0].challenge,wwU2F.request,function(e){if(e.errorCode){var t=wwU2F.errors[e.errorCode]||1;c(wwU2F.errors[t]),u.removeAttribute("hidden"),a.setAttribute("hidden","")}else{var n=encodeURIComponent(s("rememberme").value),r=encodeURIComponent(s("redirect_to").value),i=encodeURIComponent(s("user_id").value),o=encodeURIComponent(s("interim_login").value),d=new XMLHttpRequest;d.addEventListener("load",m),d.open("POST",wwU2F.ajax_url),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.responseType="json",d.send("action=wwu2f_sign&data="+encodeURIComponent(JSON.stringify(e))+"&rememberme="+n+"&redirect_to="+r+"&user_id="+i+"&interim_login="+o)}})}e.addEventListener("submit",function(e){e.preventDefault()}),"undefined"!=typeof u2f&&u2f.sign?(u.querySelector(".button").addEventListener("click",function(){a.removeAttribute("hidden"),u.setAttribute("hidden",""),n()}),s("interact").removeAttribute("hidden"),n()):c(wwU2F.noSupport)}document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof u2f&&u2f.sign)magic();else{var e=document.createElement("script");e.setAttribute("src",wwU2F.u2f_api),e.setAttribute("async",""),e.addEventListener("load",magic),e.addEventListener("error",magic),document.head.appendChild(e)}});
//# sourceMappingURL=u2flogin.min.js.map
